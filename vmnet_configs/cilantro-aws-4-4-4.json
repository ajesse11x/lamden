{
    "deployment_mode": "production",
    "deployment_type": "multi-region",
    "environment": {
        "CONSTITUTION_FILE": "4-4-4.json",
        "ANNIHILATE": true,
        "SSL_ENABLED": false
    },
    "aws": {
        "use_dns": false,
        "use_elastic_ips": false,
        "dns_configuration": {
            "use_ssl": false,
            "ssl_nodes": [
                "masternode",
                "delegate",
                "witness"
              ],
            "TTL": 20,
            "service": "route53",
            "domain_name": "theanarchy.net",
            "record_type": "A"
        },
        "logging": {
            "enabled": true,
            "interval": 60,
            "arn_name": "ec2-cloud-watch",
            "arn_id": "arn:aws:iam::929772747755:instance-profile/ec2-cloud-watch"
        },
        "security_groups": {
            "simple_https": {
                "name": "simple_https",
                "description": "Simple https security group",
                "permissions": [
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 443,
                        "ToPort": 443,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    },
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 80,
                        "ToPort": 80,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    },
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 8080,
                        "ToPort": 8080,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    },
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 22,
                        "ToPort": 22,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    },
                    {
                        "IpProtocol": "tcp",
                        "FromPort": 10000,
                        "ToPort": 10100,
                        "IpRanges": [
                            {
                                "CidrIp": "0.0.0.0/0"
                            }
                        ]
                    }
                ]
            }
        },
        "images": {
            "cilantro_base": {
                "name": "cilantro_base",
                "repo_name": "cilantro",
                "repo_url": "https://github.com/Lamden/cilantro.git",
                "branch": "test-logging",
                "username": "ubuntu",
                "build_ami": "ami-0f65671a86f061fcd",
                "instance_type": "t2.medium",
                "build_instance_type": "t2.large",
                "run_ami": "ami-0222655b32f6d9d08",
                "update_commands": [
                    "pip3 install vmnet seneca sanic-cors --upgrade --no-cache-dir",
                    "sudo apt-get install socat",
                    "sudo USER=${USER} bash scripts/setup-ssl.sh"
                ]
            },
            "cilantro_mn": {
                "name": "cilantro_mn",
                "repo_name": "cilantro",
                "repo_url": "https://github.com/Lamden/cilantro.git",
                "branch": "test-logging",
                "username": "ubuntu",
                "build_ami": "ami-0222655b32f6d9d08",
                "instance_type": "t2.medium",
                "build_instance_type": "t2.large",
                "run_ami": "ami-09cddca33b912825e",
                "update_commands": [
                    "pip3 install vmnet seneca sanic-cors --upgrade --no-cache-dir",
                    "sudo apt-get install socat",
                    "sudo USER=${USER} bash scripts/setup-ssl.sh"
                ]
            }
        }
    },

    "services": [
        {
            "name": "delegate",
            "image": "cilantro_base",
            "count": 2,
            "ports": [
                443
            ],
            "platform": {
                "name": "aws",
                "region": "us-west-2",
                "security_group": "simple_https"
            }
        },
        {
            "name": "delegate",
            "image": "cilantro_base",
            "count": 2,
            "ports": [
                443
            ],
            "platform": {
                "name": "aws",
                "region": "us-west-1",
                "security_group": "simple_https"
            }
        },
        {
            "name": "witness",
            "image": "cilantro_base",
            "count": 4,
            "ports": [
                443
            ]
        },
        {
            "name": "masternode",
            "image": "cilantro_mn",
            "count": 4,
            "ports": [
                443
            ]
        },
        {
            "name": "mgmt",
            "image": "cilantro_base",
            "count": 1,
            "ports": [
                443
            ]
        }
    ]
}
